<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title></title>
    <link rel="stylesheet" href="css/normalize.css" />
    <script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="js/chance.min.js"></script>
</head>
<body>


<script type="text/javascript">

    function Defaulty() {
        this.container        = $('<div />');
        this.normalWidth      = 0;
        this.lastElementWidth = 1;
        this.elements         = [];
        this.divider          = chance.natural({ min: 5, max: 50 });

        this.init();

    }

    Defaulty.prototype.calculateNormalWidth = function() {
        this.normalWidth = Math.round($(window).width() / this.divider);
    }

    Defaulty.prototype.calculateLastElementWidth = function() {
        this.lastElementWidth = $(window).width() - this.normalWidth * (this.divider - 1);
    }



    Defaulty.prototype.init = function() {
        this.container.prependTo($('body'));
        this.calculateNormalWidth();
        this.calculateLastElementWidth();

        // create some elements
        var numberOfElements = Math.ceil($(window).height() / this.normalWidth) * this.divider - 1;

        for (var i = 0; i <= numberOfElements; i++) {
            var usedWidth;

            if ( (i + 1) % this.divider == 0) {
                usedWidth = this.lastElementWidth;
            } else {
                usedWidth = this.normalWidth
            }

            // save element
            var element = new Element(usedWidth, this.normalWidth);
            element.element.appendTo(this.container);
            this.elements.push(element);
        }
    }


    function Element(width, height) {
        this.width    = width;
        this.height   = height;
        this.element  = $('<div />')
                .addClass('item')
                .width(this.width)
                .height(this.height)
                .css('cursor', 'pointer')
                .css('float', 'left')
        ;

        // change background color
        this.changeBackgroundColor();

        setInterval($.proxy(this.changeBackgroundColor, this), chance.natural({min: 500, max: 1500}));

        // click listener
        this.element.click($.proxy(function() {
            this.changeBackgroundColor();
        }, this));
    }

    Element.prototype.changeBackgroundColor = function() {
        this.element.css('backgroundColor', chance.color());
    }

    new Defaulty();

</script>

</body>
</html>